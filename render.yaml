# Render Infrastructure as Code
# See: https://render.com/docs/blueprint-spec

services:
  - type: web
    name: waiterix-realtime
    env: node
    plan: starter  # $7/month, always-on. Use 'free' for testing
    region: ohio   # Choose: oregon, ohio, frankfurt, singapore
    buildCommand: npm install
    startCommand: npx tsx render-realtime-server.ts
    healthCheckPath: /health
    envVars:
      - key: OPENAI_API_KEY
        sync: false  # Must be set manually in Render dashboard
      - key: AWS_ACCESS_KEY_ID
        sync: false  # Must be set manually in Render dashboard (for Polly TTS)
      - key: AWS_SECRET_ACCESS_KEY
        sync: false  # Must be set manually in Render dashboard (for Polly TTS)
      - key: AWS_REGION
        value: us-east-1
      - key: FRONTEND_URL
        value: https://main.d182r8qb7g7hdy.amplifyapp.com
      - key: API_BASE_URL
        value: https://kf3yhq6qn6.execute-api.us-east-1.amazonaws.com/dev
      - key: PORT
        value: 10000
      - key: NODE_ENV
        value: production
